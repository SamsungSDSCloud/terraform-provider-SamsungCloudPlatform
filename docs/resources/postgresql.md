---
page_title: "scp_postgresql Resource - scp"
subcategory: ""
description: |-
  Provides a PostgreSQL Database resource.
---

# Resource: scp_postgresql

Provides a PostgreSQL Database resource.


## Example Usage

```terraform
data "scp_region" "region" {
}

data "scp_standard_image" "postgres_13_6_image" {
  service_group = "DATABASE"
  service       = "PostgreSQL"
  region        = data.scp_region.region.location

  filter {
    name   = "image_name"
    values = ["PostgreSQL Community 13.6"]
  }
}

resource "scp_postgresql" "my_pg_db" {
  image_id = data.scp_standard_image.postgres_13_6_image.id

  server_name_prefix = "pg-prefix"
  cluster_name       = "pgclusterxx"

  cpu_count          = var.cpu
  memory_size_gb     = var.memory

  contract_discount = "None"

  vpc_id             = data.terraform_remote_state.vpc.outputs.id
  subnet_id          = data.terraform_remote_state.subnet.outputs.id
  security_group_ids = [data.terraform_remote_state.security-group.outputs.id]

  db_name            = var.server_name
  db_user_id         = var.id
  db_user_password   = var.password
  db_port            = 2866

  timezone = "Asia/Seoul"

  data_storage_size_gb = 10

  additional_storage {
    product_name    = "SSD"
    storage_usage   = "DATA"
    storage_size_gb = 10
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_name` (String) Name of database cluster. (3 to 20 characters only)
- `contract_discount` (String) Contract : None, 1-year, 3-year
- `cpu_count` (Number) CPU core count (2, 4, 8,..)
- `data_storage_size_gb` (Number) Default data storage size in gigabytes. (At least 10 GB required)
- `db_name` (String) Name of database. (3 to 20 lowercase alphabets)
- `db_port` (Number) Port number of this database.
- `db_user_id` (String) User account id of database. (2 to 20 lowercase alphabets)
- `db_user_password` (String, Sensitive) User account password of database.
- `image_id` (String) Postgresql virtual server image id.
- `memory_size_gb` (Number) Memory size in gigabytes(4, 8, 16,..)
- `security_group_ids` (List of String) Security-Group ids of this postgresql DB. Each security-group must be a valid security-group resource which is attached to the VPC.
- `server_name_prefix` (String) Prefix of database server names. (3 to 13 alpha-numerics with dash)
- `subnet_id` (String) Subnet id of this database server. Subnet must be a valid subnet resource which is attached to the VPC.
- `timezone` (String) Timezone setting of this database.
- `vpc_id` (String) VPC id of this database server.

### Optional

- `additional_storage` (Block List) External block storage. (Only adding is allowed) (see [below for nested schema](#nestedblock--additional_storage))
- `pg_encoding` (String) Postgresql encoding. (Only 'UTF8' for now)
- `pg_locale` (String) Postgresql locale. (Only 'C' for now)

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--additional_storage"></a>
### Nested Schema for `additional_storage`

Required:

- `product_name` (String) Storage product name. (only SSD)
- `storage_size_gb` (Number) Default data storage size in gigabytes. (At least 10 GB required)
- `storage_usage` (String) Storage usage. (DATA, ARCHIVE)
